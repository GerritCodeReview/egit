{
  "comments": [
    {
      "key": {
        "uuid": "AABOIn//+Ts\u003d",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/pull/PullResultDialog.java",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 79
      },
      "writtenOn": "2012-07-23T15:20:26Z",
      "side": 1,
      "message": "I don\u0027t get this: does the result of `getInitialSize()` change after the first invocation or why is it called twice?",
      "revId": "5a5cb6df87cfcaee4565b7f562a2eeca84442131",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn//9/w\u003d",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/pull/PullResultDialog.java",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 339
      },
      "writtenOn": "2012-07-25T15:03:28Z",
      "side": 1,
      "message": "Yeah, it\u0027s a bit tricky. The basic problem is that the infrastructure that uses Dialog#getDialogBoundsStrategy() only supports persisting the size (width \u0026 height together), but not just one of the dimensions.\n\nThe trick here is that we:\n1. compute the default height (not using any persisted value)\n2. temporarily set \"persistSize \u003d true\", which will affect our getDialogBoundsStrategy()\n3. call super.getInitialSize() to get the persisted size\n4. return a Point with persisted width and default height\n\nAnd the reason for all this is to improve UI stability and readability. Now that multi-selection is supported in the MultiPullResultDialog and that the PullResultDialog shows the repository name in the title, it\u0027s better to use full-width dialogs all the time.",
      "parentUuid": "AABOIn//+Ts\u003d",
      "revId": "5a5cb6df87cfcaee4565b7f562a2eeca84442131",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn//98Q\u003d",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/pull/PullResultDialog.java",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 79
      },
      "writtenOn": "2012-07-26T09:52:57Z",
      "side": 1,
      "message": "I see. I wonder if there\u0027s another way. Would the following work?:\n\n* getDialogBoundsStrategy always uses DIALOG_PERSISTSIZE.\n* rename persistSize to usePersistedHeight\n\nin getInitialSize:\n\n\t\tPoint size \u003d super.getInitialSize();\n\t\tif (!usePersistedHeight) {\n\t\t\tPoint defaultSize \u003d getShell().computeSize(SWT.DEFAULT, SWT.DEFAULT, true);\n\t\t\tsize.y \u003d defaultSize.y;\n\t\t}\n\t\treturn size;",
      "parentUuid": "AABOIn//9/w\u003d",
      "revId": "5a5cb6df87cfcaee4565b7f562a2eeca84442131",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn//970\u003d",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/pull/PullResultDialog.java",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 339
      },
      "writtenOn": "2012-07-26T11:14:16Z",
      "side": 1,
      "message": "\u003e Would the following work?:\n\nI don\u0027t think it would do what we want. This would always persist width \u0026 height when a dialog is closed. Persisting of the height would override the user-chosen height for the big dialog, so that value would be lost.\n\nIn JUnit-speak:\n- expected: only persist size of big dialog; in small dialog, only restore width\n- actual: only persist \u0026 restore width of all dialogs",
      "parentUuid": "AABOIn//98Q\u003d",
      "revId": "5a5cb6df87cfcaee4565b7f562a2eeca84442131",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn//97s\u003d",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/pull/PullResultDialog.java",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 339
      },
      "writtenOn": "2012-07-26T11:20:04Z",
      "side": 1,
      "message": "Sorry, the \"actual\" would be worse, since it sometimes restores a wrong height:\n- actual: persist size of all dialogs; restore width in all dialogs; only restore height of big dialogs, but restore it to the last stored value, which could be the height of a small dialog",
      "parentUuid": "AABOIn//970\u003d",
      "revId": "5a5cb6df87cfcaee4565b7f562a2eeca84442131",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn//95o\u003d",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/pull/PullResultDialog.java",
        "patchSetId": 1
      },
      "lineNbr": 208,
      "author": {
        "id": 79
      },
      "writtenOn": "2012-07-26T13:33:49Z",
      "side": 1,
      "message": "Right :/. Ok, just a minor code change then, to make this a bit more clear:\n\n* Extract the persistSize \u003d true and try block into a method int getPersistedWidth.\n* Then the code reads like this:\n\n    int persistedWidth \u003d getPersistedWidth();\n    return new Point(persistedWidth, defaultHeight);\n\nAgreed?",
      "parentUuid": "AABOIn//97s\u003d",
      "revId": "5a5cb6df87cfcaee4565b7f562a2eeca84442131",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}