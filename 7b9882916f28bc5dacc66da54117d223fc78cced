{
  "comments": [
    {
      "key": {
        "uuid": "a766b734_be856460",
        "filename": "org.eclipse.egit.core/src/org/eclipse/egit/core/internal/indexdiff/GitResourceDeltaVisitor.java",
        "patchSetId": 4
      },
      "lineNbr": 151,
      "author": {
        "id": 1179
      },
      "writtenOn": "2014-12-10T13:22:08Z",
      "side": 1,
      "message": "Calling isIgnoredInOldIndex() for files could be still expensive (will split paths for each file and do in worst case filesInDelta * path.segmentsCount() lookups).\n\nBefore returning false or true here we could collect *known* ignored/not ignored directories state in the temporary map (key \u003d path, value \u003d boolean) and so remember the \"known\" path state there, saving us the lookup.\n\nFor files which are located in the same directory structure the lookup will be fast because the map will contain already all parents after first \"while\" round.\n\nAt the end we will have something like filesInDelta*2 + max (segmentsCount()) lookups for files from the same tree.",
      "revId": "7b9882916f28bc5dacc66da54117d223fc78cced",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a766b734_d9b4ba1f",
        "filename": "org.eclipse.egit.core/src/org/eclipse/egit/core/internal/indexdiff/GitResourceDeltaVisitor.java",
        "patchSetId": 4
      },
      "lineNbr": 151,
      "author": {
        "id": 326
      },
      "writtenOn": "2014-12-10T13:34:52Z",
      "side": 1,
      "message": "Hm, I know what you mean. I\u0027m not sure whether this wouldn\u0027t cause more overhead than it would shove off the times. The visitor is re-created for every resource change event. It could potentially be a lot of resources, yes, but it\u0027s just as common that it\u0027s only a few. This code is not sooo expensive, I think.\n\nStill I can give it a try if you insist.",
      "parentUuid": "a766b734_be856460",
      "revId": "7b9882916f28bc5dacc66da54117d223fc78cced",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a766b734_d9db1a61",
        "filename": "org.eclipse.egit.core/src/org/eclipse/egit/core/internal/indexdiff/GitResourceDeltaVisitor.java",
        "patchSetId": 4
      },
      "lineNbr": 151,
      "author": {
        "id": 1179
      },
      "writtenOn": "2014-12-10T13:55:56Z",
      "side": 1,
      "message": "My problem is my huge repository and after spending lot of time to optimize j/egit performance I fear any new possible regression :-)\nLook, if I have only 1000 ignored directories in the repo (and I fear I have much more) and the average path segments count of files is over 15, for only 10 delta files I have here 1000 * 15 * 10 \u003d 150000 lookups which sounds a bit more then 35 (10*2 + 15).\n\nFor sure, for a small projects like e/jgit this optimization doesn\u0027t make sense, because the absolute times here are probably equal for any solution one can imagine.",
      "parentUuid": "a766b734_d9b4ba1f",
      "revId": "7b9882916f28bc5dacc66da54117d223fc78cced",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}