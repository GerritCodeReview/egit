{
  "comments": [
    {
      "key": {
        "uuid": "93cb277f_edf9e1e4",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/GenerateHistoryJob.java",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 236689
      },
      "writtenOn": "2020-03-24T17:25:14Z",
      "side": 1,
      "message": "If I understand correctly, the essential change is to force an update if the new list is empty and this guard covers the update call which is not done anymore by the original else branch (due to the added not-empty condition).\n\nI wonder if there is a case where the initial size equals the new size but the commits are different, so that no update is called although it should.\n\nMaybe the code becomes easier to read, if a boolean doUiUpdate is introduced and set to true in the appropriate places. This would allow a simple\nif(doUiUpdate){updateUI(incomplete;}\njust before the finally without having to worry about the \"missing\" else-branches.",
      "revId": "9c1256369abe5e8d891eb1ab0f0ca15adfd52217",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7486f65_f6c8518b",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/GenerateHistoryJob.java",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 44628
      },
      "writtenOn": "2020-03-24T17:38:03Z",
      "side": 1,
      "message": "The problem was two-fold: it failed on an uncheck (typically on uncheck of refs/remotes/**) because that meant nothing was checked. So we ended up here, but commitNotFound was true because the job was looking for HEAD. Adding the !isEmpty() makes the job update the UI in that case via the else branch.\n\nWith that in place, it then failed on the check refs/tags/**. This time, there _are_ commits, but again not HEAD, so it entered this branch again. That\u0027s when I added the initialSize comparison.",
      "parentUuid": "93cb277f_edf9e1e4",
      "revId": "9c1256369abe5e8d891eb1ab0f0ca15adfd52217",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "167f2b17_b71a25eb",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/GenerateHistoryJob.java",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 236689
      },
      "writtenOn": "2020-03-24T19:30:38Z",
      "side": 1,
      "message": "I don\u0027t insist on extracting the updateUI-call into a separate \"if\" (although I\u0027d find it more readable, in particular if the conditions when to do it are not complete, yet). Also, the if seems to deal with two different issues at once - ui update and show warning. The original nested if looks suspicious anyway - isn\u0027t the intention really \"show warning or do an UI-update\"; possibly not, if you want to prevent unnecessary updates...\n\nBut I want to ask again. Can you think of a szenario where 5 commits are shown originally and due to a filter change (possibly switch from one complicated ref-filter definition to another) 5 other commits are loaded? Or rather can you guarantee that there is no such scenario?",
      "parentUuid": "f7486f65_f6c8518b",
      "revId": "9c1256369abe5e8d891eb1ab0f0ca15adfd52217",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e0c684f6_fbc246b3",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/GenerateHistoryJob.java",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 44628
      },
      "writtenOn": "2020-03-25T09:42:25Z",
      "side": 1,
      "message": "\u003e Or rather can you guarantee that there is\n \u003e no such scenario?\n\nThis cannot happen. The GitHistoryPage creates a new GenerateHistoryHob in that case. So the if is just to avoid a UI update if we didn\u0027t load any new commits.",
      "parentUuid": "167f2b17_b71a25eb",
      "revId": "9c1256369abe5e8d891eb1ab0f0ca15adfd52217",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b84e598_bc691b83",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/GenerateHistoryJob.java",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 236689
      },
      "writtenOn": "2020-03-25T15:57:49Z",
      "side": 1,
      "message": "Thanks for the clarification.",
      "parentUuid": "e0c684f6_fbc246b3",
      "revId": "9c1256369abe5e8d891eb1ab0f0ca15adfd52217",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4ab04d6_3f04c218",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/GenerateHistoryJob.java",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 236689
      },
      "writtenOn": "2020-03-24T17:25:14Z",
      "side": 1,
      "message": "Did you intentionally only fix this \"missing braces\" location (as there are many more)? If you wanted to only make functionally relevant changes, this would (and fix missing braces along the way), this change is not necessary.",
      "revId": "9c1256369abe5e8d891eb1ab0f0ca15adfd52217",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e2dcc98_fb255880",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/GenerateHistoryJob.java",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 44628
      },
      "writtenOn": "2020-03-24T17:38:03Z",
      "side": 1,
      "message": "That\u0027s a remnant of my having had a System.err.println here while tracking this down. Noticed after the commit that the braces were still in, but I don\u0027t think it\u0027s worth removing it.",
      "parentUuid": "e4ab04d6_3f04c218",
      "revId": "9c1256369abe5e8d891eb1ab0f0ca15adfd52217",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be8cb547_f75458ad",
        "filename": "org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/GenerateHistoryJob.java",
        "patchSetId": 1
      },
      "lineNbr": 158,
      "author": {
        "id": 236689
      },
      "writtenOn": "2020-03-24T19:30:38Z",
      "side": 1,
      "message": "Fine with me.",
      "parentUuid": "0e2dcc98_fb255880",
      "revId": "9c1256369abe5e8d891eb1ab0f0ca15adfd52217",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}